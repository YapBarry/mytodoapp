{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/Desktop/my_todo_list/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Desktop/my_todo_list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/user/Desktop/my_todo_list/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/user/Desktop/my_todo_list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Checkbox from'./Checkbox';import{db}from\"./firebase\";import{collection,addDoc}from\"firebase/firestore\";import{query,onSnapshot,doc,updateDoc,deleteDoc,orderBy,serverTimestamp}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cbState=_useState6[0],setCbState=_useState6[1];useEffect(function(){var collectionRef=collection(db,'todo');var q=query(collectionRef,orderBy('createdAt'));var unsub=onSnapshot(q,function(querySnapshot){var todoArray=[];var cbArray=[];querySnapshot.forEach(function(doc){todoArray.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));cbArray.push(doc.data().completed);});setList(todoArray);setCbState(cbArray);});return function(){return unsub();};},[]);var addToDo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newToDo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(input!==\"\")){_context.next=6;break;}newToDo={toDo:input,completed:false,createdAt:serverTimestamp()};_context.next=5;return addDoc(collection(db,'todo'),newToDo);case 5:// // add the todo to existing list (for non database method)\n// setList([...list, newToDo]);\n// clear input box\nsetInput(\"\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function addToDo(_x){return _ref.apply(this,arguments);};}();var handleEdit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(todo,list){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateDoc(doc(db,'todo',todo.id),{toDo:list});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleEdit(_x2,_x3){return _ref2.apply(this,arguments);};}();var toggleComplete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(todo){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return updateDoc(doc(db,'todo',todo.id),{completed:!todo.completed});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function toggleComplete(_x4){return _ref3.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return deleteDoc(doc(db,'todo',id));case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function handleDelete(_x5){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:addToDo,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"To Do List\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setInput(e.target.value);},value:input}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add To Do\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(toDo,index){return/*#__PURE__*/_jsxs(\"div\",{className:toDo.completed?\"strike\":\"\",children:[/*#__PURE__*/_jsx(\"input\",{value:toDo.toDo,type:\"checkbox\",checked:cbState[index],onChange:function onChange(){return toggleComplete(toDo);}}),/*#__PURE__*/_jsx(\"span\",{children:toDo.toDo}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(toDo.id);},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"hr\",{})]},toDo.id);})})]});}export default App;","map":{"version":3,"names":["useState","useEffect","Checkbox","db","collection","addDoc","query","onSnapshot","doc","updateDoc","deleteDoc","orderBy","serverTimestamp","App","list","setList","input","setInput","cbState","setCbState","collectionRef","q","unsub","querySnapshot","todoArray","cbArray","forEach","push","data","id","completed","addToDo","e","preventDefault","newToDo","toDo","createdAt","handleEdit","todo","toggleComplete","handleDelete","target","value","map","index"],"sources":["/Users/user/Desktop/my_todo_list/src/App.js"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport Checkbox from './Checkbox';\nimport { db } from \"./firebase\";\nimport { collection, addDoc } from \"firebase/firestore\";\n\nimport { query, onSnapshot, doc, updateDoc, deleteDoc, orderBy, serverTimestamp} from \"firebase/firestore\";\n\nexport function App() {\n  const [list, setList] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [cbState, setCbState] = useState([]);\n  \n  \n  useEffect(() => {\n    const collectionRef = collection(db, 'todo');\n    const q = query(collectionRef, orderBy('createdAt'));\n    const unsub = onSnapshot(q, (querySnapshot) => {\n      let todoArray = [];\n      let cbArray = [];\n      querySnapshot.forEach((doc) => {\n        todoArray.push({...doc.data(), id: doc.id});\n        cbArray.push(doc.data().completed);\n      });\n      setList(todoArray);\n      setCbState(cbArray);\n    });\n    return () => unsub();\n  }, []);\n\n  const addToDo = async (e) => {\n    e.preventDefault();\n    if (input !== \"\") {\n      const newToDo = {\n        toDo: input,\n        completed: false,\n        createdAt: serverTimestamp()\n      };\n\n      await addDoc(collection(db, 'todo'), newToDo);\n\n      // // add the todo to existing list (for non database method)\n      // setList([...list, newToDo]);\n\n      // clear input box\n      setInput(\"\");\n    }\n  };\n\n  const handleEdit = async (todo, list) => { \n    await updateDoc(doc(db, 'todo', todo.id), {toDo: list});\n  };\n  const toggleComplete = async (todo) => {\n    await updateDoc(doc(db, 'todo', todo.id), { \n      completed: !todo.completed\n    });\n  };\n  const handleDelete = async (id) => {\n    await deleteDoc(doc(db, 'todo', id));\n  };\n\n  return (\n    <div className=\"App\">\n      <form onSubmit={addToDo}>\n        <h1>To Do List</h1>\n        <input \n        type=\"text\"\n        onChange={(e) => setInput(e.target.value)}\n        value={input}\n        ></input>\n        <button type=\"submit\">Add To Do</button>\n      </form>\n      <ul>\n        {list.map((toDo,index) => (\n          <div key={toDo.id} className={toDo.completed ? \"strike\" : \"\"}>\n            <input \n            value={toDo.toDo} \n            type=\"checkbox\" \n            checked={cbState[index]}\n            onChange={() => toggleComplete(toDo)}/>\n            <span>{toDo.toDo}</span>\n            <button onClick={() => handleDelete(toDo.id)}>&times;</button>  \n            <hr></hr>     \n          </div>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}